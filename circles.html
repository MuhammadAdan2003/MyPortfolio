<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Physics Circles | Interactive Simulation</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/matter-js/0.18.0/matter.min.js"></script>
  </head>
  <body class="bg-white text-gray-800 min-h-screen">
    <!-- Main Content Grid - Full Height -->
    <div class="flex flex-col lg:flex-row min-h-screen">
      <!-- Left Side - Content (50%) -->
       <!-- w-full lg:w-1/2 p-6 md:p-8 lg:p-12 flex flex-col justify-center h-screen -->
      <div class="w-full lg:w-1/2 p-6 md:p-8 lg:p-12 flex flex-col justify-center h-screen">
        <div class="max-w-2xl mx-auto">
          <!-- Header -->
            <header class="mb-8 lg:mb-12">
              <h1
                class="text-3xl md:text-4xl lg:text-5xl font-bold text-gray-900 mb-4"
              >
                Interactive <span class="text-blue-600">Physics</span> Simulation
              </h1>
              <p class="text-lg text-gray-600">
                Experience real-time physics with interactive circles inside a
                large container
              </p>
            </header>
          <!-- Main Content -->
          <div class="space-y-8 overflow-y-auto pr-2 max-h-[70vh]">
            <!-- Section 1 -->
            <div>
              <h2
                class="text-2xl font-bold text-gray-800 mb-4 flex items-center"
              >
                <span class="w-3 h-3 bg-blue-500 rounded-full mr-3"></span>
                Big Circle Concept
              </h2>
              <p class="text-gray-700 mb-4">
                This simulation features one large circular boundary containing
                many smaller circles. All circles interact with realistic
                physics within this confined space.
              </p>
              <div class="bg-gray-900 text-white p-4 rounded-lg">
                <div class="flex items-center">
                  <div
                    class="w-10 h-10 rounded-full border-2 border-white flex items-center justify-center mr-4"
                  >
                    <div class="w-3 h-3 bg-white rounded-full"></div>
                  </div>
                  <div>
                    <div class="font-bold">Large Container Circle</div>
                    <div class="text-sm text-gray-300">
                      Contains all smaller circles
                    </div>
                  </div>
                </div>
              </div>
            </div>

            <!-- Section 2 -->
            <div>
              <h2
                class="text-2xl font-bold text-gray-800 mb-4 flex items-center"
              >
                <span class="w-3 h-3 bg-purple-500 rounded-full mr-3"></span>
                Interactive Features
              </h2>
              <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                <div
                  class="bg-white p-4 rounded-lg border border-gray-200 shadow-sm"
                >
                  <div class="flex items-center mb-2">
                    <div
                      class="w-8 h-8 rounded-full bg-black flex items-center justify-center mr-2"
                    >
                      <span class="text-white text-sm">ðŸŽ¯</span>
                    </div>
                    <h3 class="font-bold text-gray-800">Contained Physics</h3>
                  </div>
                  <p class="text-sm text-gray-600">
                    All circles move within one large circular boundary
                  </p>
                </div>

                <div
                  class="bg-white p-4 rounded-lg border border-gray-200 shadow-sm"
                >
                  <div class="flex items-center mb-2">
                    <div
                      class="w-8 h-8 rounded-full bg-black flex items-center justify-center mr-2"
                    >
                      <span class="text-white text-sm">âš¡</span>
                    </div>
                    <h3 class="font-bold text-gray-800">Real Physics</h3>
                  </div>
                  <p class="text-sm text-gray-600">
                    Gravity, collisions, and momentum simulated
                  </p>
                </div>

                <div
                  class="bg-white p-4 rounded-lg border border-gray-200 shadow-sm"
                >
                  <div class="flex items-center mb-2">
                    <div
                      class="w-8 h-8 rounded-full bg-black flex items-center justify-center mr-2"
                    >
                      <span class="text-white text-sm">ðŸŒ€</span>
                    </div>
                    <h3 class="font-bold text-gray-800">Circular Boundary</h3>
                  </div>
                  <p class="text-sm text-gray-600">
                    One large circle contains all smaller circles
                  </p>
                </div>

                <div
                  class="bg-white p-4 rounded-lg border border-gray-200 shadow-sm"
                >
                  <div class="flex items-center mb-2">
                    <div
                      class="w-8 h-8 rounded-full bg-black flex items-center justify-center mr-2"
                    >
                      <span class="text-white text-sm">ðŸ‘†</span>
                    </div>
                    <h3 class="font-bold text-gray-800">Hover Interaction</h3>
                  </div>
                  <p class="text-sm text-gray-600">
                    Hover over circles to push them around
                  </p>
                </div>
              </div>
            </div>

            <!-- Section 3 -->
            <div>
              <h2
                class="text-2xl font-bold text-gray-800 mb-4 flex items-center"
              >
                <span class="w-3 h-3 bg-green-500 rounded-full mr-3"></span>
                Simulation Stats
              </h2>
              <div class="bg-gray-900 text-gray-100 p-5 rounded-xl">
                <div class="grid grid-cols-2 md:grid-cols-4 gap-4 text-center">
                  <div>
                    <div
                      class="text-2xl font-bold text-white mb-1"
                      id="circle-count"
                    >
                      35
                    </div>
                    <div class="text-xs text-gray-400">Total Circles</div>
                  </div>
                  <div>
                    <div class="text-2xl font-bold text-white mb-1">1</div>
                    <div class="text-xs text-gray-400">Container</div>
                  </div>
                  <div>
                    <div
                      class="text-2xl font-bold text-white mb-1"
                      id="fps-counter"
                    >
                      60
                    </div>
                    <div class="text-xs text-gray-400">FPS</div>
                  </div>
                  <div>
                    <div class="text-2xl font-bold text-white mb-1">
                      Matter.js
                    </div>
                    <div class="text-xs text-gray-400">Engine</div>
                  </div>
                </div>
              </div>
            </div>

            <!-- Instructions -->
            <div class="bg-blue-50 border border-blue-100 rounded-xl p-5">
              <h3 class="font-bold text-blue-800 mb-2">ðŸ’¡ How to Interact</h3>
              <p class="text-blue-700 text-sm">
                Move your cursor over the circles inside the large container on
                the right. Watch them bounce around and interact with each other
                in the confined space.
              </p>
              <div class="mt-3 flex items-center text-blue-600">
                <svg
                  class="w-5 h-5 mr-2"
                  fill="currentColor"
                  viewBox="0 0 20 20"
                >
                  <path
                    fill-rule="evenodd"
                    d="M10 18a8 8 0 100-16 8 8 0 000 16zM7 9a1 1 0 000 2h6a1 1 0 100-2H7z"
                    clip-rule="evenodd"
                  />
                </svg>
                <span class="text-sm"
                  >All circles are contained within one big circle</span
                >
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Right Side - Canvas (50%) - Full Height -->
      <div class="w-full lg:w-1/2 bg-white relative h-screen">
        <canvas
          id="physics-canvas"
          class="absolute inset-0 w-full h-full"
        ></canvas>

        <!-- Canvas Overlay Info -->
        <div class="absolute top-6 left-6 right-6">
          <div
            class="bg-white/90 backdrop-blur-sm text-gray-800 p-4 rounded-lg border border-gray-300 shadow-sm"
          >
            <div class="flex flex-col sm:flex-row items-center justify-between">
              <div class="mb-3 sm:mb-0">
                <div class="flex items-center">
                  <div
                    class="w-8 h-8 rounded-full border-2 border-gray-800 flex items-center justify-center mr-3"
                  >
                    <div class="w-2 h-2 bg-gray-800 rounded-full"></div>
                  </div>
                  <div>
                    <h3 class="font-bold text-lg">
                      Circular Container Simulation
                    </h3>
                    <p class="text-gray-600 text-sm">
                      Many circles inside one big container
                    </p>
                  </div>
                </div>
              </div>
              <div class="flex items-center space-x-4">
                <div class="text-center">
                  <div
                    class="text-xl font-bold text-gray-900"
                    id="active-circles"
                  >
                    35
                  </div>
                  <div class="text-xs text-gray-600">Circles</div>
                </div>
                <div class="h-8 w-px bg-gray-300"></div>
                <div class="text-center">
                  <div class="text-xl font-bold text-gray-900" id="canvas-fps">
                    60
                  </div>
                  <div class="text-xs text-gray-600">FPS</div>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- Legend -->
        <div class="absolute bottom-6 left-6">
          <div
            class="bg-white/90 backdrop-blur-sm text-gray-800 p-4 rounded-lg max-w-xs border border-gray-300 shadow-sm"
          >
            <h4 class="font-bold mb-2 text-sm">Legend</h4>
            <div class="space-y-2">
              <div class="flex items-center">
                <div
                  class="w-4 h-4 rounded-full bg-black mr-2 border border-gray-300"
                ></div>
                <span class="text-xs">Small circles with text</span>
              </div>
              <div class="flex items-center">
                <div
                  class="w-4 h-4 rounded-full border-2 border-gray-800 mr-2 flex items-center justify-center"
                >
                  <div class="w-1 h-1 bg-gray-800 rounded-full"></div>
                </div>
                <span class="text-xs">Large container boundary</span>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <script>
      // Module aliases
      const Engine = Matter.Engine,
        Render = Matter.Render,
        Runner = Matter.Runner,
        Bodies = Matter.Bodies,
        Composite = Matter.Composite,
        Mouse = Matter.Mouse,
        MouseConstraint = Matter.MouseConstraint;

      // Create engine - WITH GRAVITY
      const engine = Engine.create();
      engine.gravity.x = 0;
      engine.gravity.y = 0.2; // Reduced gravity for smoother movement

      // Get the canvas element
      const canvas = document.getElementById("physics-canvas");

      // Create renderer
      const render = Render.create({
        element: canvas.parentElement,
        engine: engine,
        canvas: canvas,
        options: {
          width: canvas.parentElement.clientWidth,
          height: canvas.parentElement.clientHeight,
          wireframes: false,
          background: "#ffffff", // White background
          showVelocity: false,
        },
      });

      // Create runner
      const runner = Runner.create();

      // Arrays to track circles
      let circles = [];
      let bigCircle = null;
      const BIG_CIRCLE_RADIUS = 350; // Increased from 250 to 350

      // Text options for circles
      const circleTexts = [
        "HTML",
        "CSS",
        "JavaScript",
        "JQuery",
        "React",
        "GSAP",
        "MYSQL",
        "PHP",
        "LARAVEL",
        "GIT",
        "TAILWIND CSS",
        "BOOTSTRAP",
        "UI/UX",
        "Rest API's",
        "Third party API's",
        "Animations"
      ];

      console.log(`${circleTexts.length} ye circles ki length h `);

      // Function to create a small circle with text
      function createSmallCircle(x, y, text) {
        const radius = 60; // Size of circle for all

        const circle = Bodies.circle(x, y, radius, {
          restitution: 0.7,
          friction: 0.05,
          frictionAir: 0.02,
          density: 0.002,
          render: {
            fillStyle: "#000000",
            lineWidth: 0,
            strokeStyle: "transparent",
          },
        });

        circle.text =
          text || circleTexts[Math.floor(Math.random() * circleTexts.length)];

        Composite.add(engine.world, circle);
        circles.push(circle);

        return circle;
      }

      // Function to create the big container circle
      function createBigCircle() {
        const canvasWidth = render.options.width;
        const canvasHeight = render.options.height;

        // Position big circle in center
        const centerX = canvasWidth / 2;
        const centerY = canvasHeight / 2;

        // Create invisible circle for boundary (will be rendered manually)
        bigCircle = Bodies.circle(centerX, centerY, BIG_CIRCLE_RADIUS, {
          isStatic: true,
          isSensor: true, // No collisions, just for containment
          render: {
            fillStyle: "transparent",
            strokeStyle: "transparent",
            lineWidth: 0,
          },
        });

        // Add constraint to keep small circles inside
        Composite.add(engine.world, bigCircle);

        // Create circular boundary walls
        createCircularBoundary(centerX, centerY, BIG_CIRCLE_RADIUS);

        return bigCircle;
      }

      // Create circular boundary using small wall segments
      function createCircularBoundary(centerX, centerY, radius) {
        const segments = 48; // Increased from 32 for smoother circle
        const angleStep = (Math.PI * 2) / segments;

        for (let i = 0; i < segments; i++) {
          const angle = i * angleStep;
          const nextAngle = (i + 1) * angleStep;

          const x1 = centerX + Math.cos(angle) * radius;
          const y1 = centerY + Math.sin(angle) * radius;
          const x2 = centerX + Math.cos(nextAngle) * radius;
          const y2 = centerY + Math.sin(nextAngle) * radius;

          // Calculate distance between points for wall length
          const dx = x2 - x1;
          const dy = y2 - y1;
          const length = Math.sqrt(dx * dx + dy * dy);

          // Calculate center point for the wall
          const wallX = (x1 + x2) / 2;
          const wallY = (y1 + y2) / 2;

          // Calculate angle for the wall
          const wallAngle = Math.atan2(dy, dx);

          // Create wall segment
          const wall = Bodies.rectangle(wallX, wallY, length, 12, {
            isStatic: true,
            angle: wallAngle,
            render: {
              fillStyle: "transparent",
              strokeStyle: "transparent",
              lineWidth: 0,
            },
          });

          Composite.add(engine.world, wall);
        }
      }

      // Create many small circles inside the big circle
      function createSmallCircles() {
        // Clear existing circles
        circles.forEach((circle) => {
          Composite.remove(engine.world, circle);
        });
        circles = [];

        const centerX = render.options.width / 2;
        const centerY = render.options.height / 2;
        const circleCount = circleTexts.length; // Fewer circles since they're larger

        // Create circles at random positions inside the big circle
        for (let i = 0; i < circleCount; i++) {
          let x, y, distance;
          let attempts = 0;

          do {
            x = centerX + (Math.random() - 0.5) * (BIG_CIRCLE_RADIUS - 80) * 2;
            y = centerY + (Math.random() - 0.5) * (BIG_CIRCLE_RADIUS - 80) * 2;

            distance = Math.sqrt(
              Math.pow(x - centerX, 2) + Math.pow(y - centerY, 2),
            );
            attempts++;
          } while (distance > BIG_CIRCLE_RADIUS - 80 && attempts < 100);

          // ðŸ”¥ YAHAN TEXT PASS KARO
          createSmallCircle(x, y, circleTexts[i]);
        }

        // Update circle count displays
        document.getElementById("circle-count").textContent = circleCount;
        document.getElementById("active-circles").textContent = circleCount;
      }

      // Add mouse control
      const mouse = Mouse.create(render.canvas);
      const mouseConstraint = MouseConstraint.create(engine, {
        mouse: mouse,
        constraint: {
          stiffness: 0.1,
          render: {
            visible: false,
          },
        },
      });

      Composite.add(engine.world, mouseConstraint);

      // Keep mouse in sync with rendering
      render.mouse = mouse;

      // Variables for FPS counter
      let lastTime = 0;
      let frameCount = 0;
      let fps = 60;

      // Function to handle hover effect
      function handleHoverEffect() {
        const mousePosition = mouse.position;

        // Check if mouse is over any circle
        circles.forEach((circle) => {
          const dx = mousePosition.x - circle.position.x;
          const dy = mousePosition.y - circle.position.y;
          const distance = Math.sqrt(dx * dx + dy * dy);
          const hoverRadius = circle.circleRadius + 40; // Increased hover radius

          if (distance < hoverRadius) {
            // Apply gentle force away from mouse
            const forceMagnitude = 0.008; // Reduced for more controlled movement
            const force = {
              x: (circle.position.x - mousePosition.x) * forceMagnitude,
              y: (circle.position.y - mousePosition.y) * forceMagnitude,
            };

            Matter.Body.applyForce(circle, circle.position, force);
          }
        });
      }

      // Custom rendering to add text to circles and draw big circle outline
      Matter.Events.on(render, "afterRender", function () {
        const context = render.context;
        const centerX = render.options.width / 2;
        const centerY = render.options.height / 2;

        // Draw big circle outline - SOLID LINE, NO DASHES
        context.save();
        context.beginPath();
        context.arc(centerX, centerY, BIG_CIRCLE_RADIUS, 0, Math.PI * 2);
        context.strokeStyle = "rgba(0, 0, 0, 0.5)"; // Darker, solid line
        context.lineWidth = 4; // Thicker line
        context.stroke(); // No dashes
        context.restore();

        // Draw each small circle with text
        circles.forEach((circle) => {
          const position = circle.position;
          const radius = circle.circleRadius;

          context.save();
          context.translate(position.x, position.y);

          // Draw circle - SOLID BLACK (no border on hover)
          context.beginPath();
          context.arc(0, 0, radius, 0, Math.PI * 2);
          context.fillStyle = "#000000"; // Black
          context.fill();

          // REMOVED: No border on hover

          // Draw text (WHITE)
          context.fillStyle = "#FFFFFF";

          // Calculate font size based on circle size
          let fontSize = radius / 1.5; // Slightly larger font
          context.font = `bold ${fontSize}px Arial, sans-serif`;
          context.textAlign = "center";
          context.textBaseline = "middle";

          // Ensure text fits in circle
          const maxWidth = radius * 1.6;
          while (
            context.measureText(circle.text).width > maxWidth &&
            fontSize > 10
          ) {
            fontSize -= 1;
            context.font = `bold ${fontSize}px Arial, sans-serif`;
          }

          context.fillText(circle.text, 0, 0);

          context.restore();
        });

        // Handle hover effect
        handleHoverEffect();

        // Calculate FPS
        frameCount++;
        const now = performance.now();
        if (now >= lastTime + 1000) {
          fps = Math.round((frameCount * 1000) / (now - lastTime));
          frameCount = 0;
          lastTime = now;
          document.getElementById("fps-counter").textContent = fps;
          document.getElementById("canvas-fps").textContent = fps;
        }
      });

      // Handle window resize
      function handleResize() {
        const container = canvas.parentElement;
        render.options.width = container.clientWidth;
        render.options.height = container.clientHeight;

        render.canvas.width = render.options.width;
        render.canvas.height = render.options.height;

        // Clear everything and recreate
        Composite.clear(engine.world);
        circles = [];
        bigCircle = null;

        // Recreate big circle and small circles
        createBigCircle();
        createSmallCircles();

        // Add mouse constraint back
        Composite.add(engine.world, mouseConstraint);
      }

      // Initialize the simulation
      function init() {
        // Create big circle container
        createBigCircle();

        // Create many small circles inside
        createSmallCircles();

        // Run the engine and renderer
        Runner.run(runner, engine);
        Render.run(render);
      }

      // Start the simulation when page loads
      window.addEventListener("load", function () {
        // Initial setup
        handleResize();
        init();
      });

      // Handle resize events
      window.addEventListener("resize", function () {
        handleResize();
      });

      // Prevent canvas from interfering with page scrolling
      canvas.addEventListener("wheel", function (e) {
        e.stopPropagation();
      });
    </script>
  </body>
</html>
